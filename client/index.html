<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="author" content="">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="index.css" rel="stylesheet">
</head>

<body>

  <p>Hello, world! 1s5d454</p>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
  <script src="index.js"></script>


  <!DOCTYPE html>
  <html>

  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="author" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="index.css" rel="stylesheet">
  </head>

  <body>

    <p>Hello, world!</p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>

    <style>
      textarea {
        vertical-align: bottom;
      }

      #output {
        overflow: auto;
      }

      #output>p {
        overflow-wrap: break-word;
      }

      #output span {
        color: blue;
      }

      #output span.error {
        color: red;
      }
    </style>
    <h2>WebSocket Test</h2>
    <textarea cols=60 rows=6></textarea>
    <button>send</button>
    <div id=output></div>
    <script>
      // http://www.websocket.org/echo.html

      var button = document.querySelector("button"),
        output = document.querySelector("#output"),
        textarea = document.querySelector("textarea"),
        // wsUri = "ws://echo.websocket.org/",
        wsUri = "ws://91.166.171.168:7777",
        websocket = new WebSocket(wsUri);

      button.addEventListener("click", onClickButton);

      websocket.onopen = function (e) {
        writeToScreen("CONNECTED");
        doSend("WebSocket rocks");
      };

      websocket.onclose = function (e) {
        writeToScreen("DISCONNECTED");
      };

      websocket.onmessage = function (e) {
        console.log(e.data)
        writeToScreen("<span>RESPONSE: " + e.data + "</span>");
      };

      websocket.onerror = function (e) {
        writeToScreen("<span class=error>ERROR:</span> " + e.data);
      };

      function doSend(message) {
        writeToScreen("SENT: " + message);
        websocket.send(message);
      }

      function writeToScreen(message) {
        output.insertAdjacentHTML("afterbegin", "<p>" + message + "</p>");
      }

      function onClickButton() {
        var text = textarea.value;

        text && doSend(text);
        textarea.value = "";
        textarea.focus();
      }
    </script>


  </body>

  </html>

</body>

</html>